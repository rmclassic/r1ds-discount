
services:
 database:
  container_name: r1ds_discount_db
  image: mysql:8.0
  volumes:
   - database:/var/lib/mysql
  ports:
   - "3336:3306"
  environment:
   - MYSQL_USER=discount
   - MYSQL_USER_PWD=ASecurePasswd
   - 'MYSQL_ROOT_PWD=D0NTgUess'
   - MYSQL_USER_DB=discount_service

 backend:
  container_name: r1ds_discount_backend
  build: .
  ports:
   - "4575:3000"
  environment:
   - MYSQL_CONN=crmdfx:ASecurePasswd@tcp(r1ds_discount_db:3306)/discount_service?charset=utf8&parseTime=true
   - WALLET_ENDPOINT=http://r1ds_wallet_backend
  depends_on:
   - database

volumes:
 database: